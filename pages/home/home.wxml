<!--pages/home/home.wxml-->
<view class="container">

  <view wx:if="{{pets.length === 0}}" class="empty-state">
    <view class="empty-icon">ğŸ¾</view>
    <text class="empty-text">è¿˜æ²¡æœ‰æ·»åŠ å® ç‰©</text>
    <text class="empty-desc">è¯·åˆ°"é“²å±å®˜"é¡µé¢æ·»åŠ å® ç‰©ä¿¡æ¯</text>
  </view>

  <view wx:else class="pets-list">
    <view wx:for="{{pets}}" wx:key="id" class="pet-card">
      <view class="pet-layout">
        <!-- å·¦ä¾§å¤´åƒåŒºåŸŸ -->
        <view class="avatar-section">
          <text class="pet-name-on-avatar">{{item.name}}</text>
          <view class="pet-avatar">
            <image wx:if="{{item.avatar}}" src="{{item.avatar}}" class="avatar-img" mode="aspectFill"></image>
            <text wx:else class="avatar-placeholder">{{item.name.charAt(0)}}</text>
          </view>
        </view>

        <!-- å³ä¾§è¿›é£Ÿè®°å½•åŒºåŸŸ -->
        <view class="feeding-info">
          <view wx:if="{{(feedingRecords[item.id] || []).length === 0}}" class="no-feeding-today">
            <text class="no-feeding-text">ä»Šæ—¥è¿˜æœªè¿›é£Ÿ</text>
          </view>
          <view wx:else class="feeding-list">
            <view wx:for="{{feedingRecords[item.id]}}" wx:key="index" wx:for-item="record" class="feeding-record">
              <text class="feeding-time">{{record.time}}</text>
              <text class="feeding-order">ç¬¬{{index + 1}}æ¬¡</text>
              <text class="feeding-amount">{{record.amount}}g</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æŠ•å–‚æŒ‰é’® -->
  <view class="bottom-feed-button">
    <button class="feed-circle-btn" bindtap="showFeedModal">æŠ•å–‚</button>
  </view>
</view>